# 企业级应用开发SSM课程作品提交报告

## 团队信息
- 姓名：______________，学号：______________
- 姓名：______________，学号：______________
- 姓名：______________，学号：______________


### 一、项目概述
1. **项目背景**：随着网络文学的快速发展，越来越多的读者喜欢在线阅读小说。为满足这一需求，我们开发了一个在线小说托管网站（novel-site），提供小说发布、阅读、评论等功能，为读者和作者搭建一个交流平台。
   - 项目特点：采用Spring Boot + MyBatis + SQLite技术栈，实现了一个功能完整的在线小说阅读平台
   - 项目规模：MVC三层架构，包含用户管理、小说管理、阅读功能、互动功能等多个模块

2. **项目目标**：
   - 核心功能：实现用户注册登录、小说发布管理、章节阅读、评论评分、收藏书签等核心功能
   - 技术目标：掌握Spring Boot、MyBatis、Thymeleaf等主流技术的应用
   - 体验目标：为用户提供良好的在线阅读体验，为作者提供便捷的内容发布平台
   - 性能目标：支持多用户并发访问，保证系统稳定性和响应速度

3. **技术选型**：
   - 后端框架：Spring Boot 2.7.18（Spring MVC + Spring Core + Spring Data）
   - 数据访问：MyBatis 2.3.2（ORM框架，提供SQL映射功能）
   - 数据库：SQLite（轻量级关系型数据库，便于部署）
   - 前端模板：Thymeleaf（服务器端Java模板引擎）
   - 构建工具：Maven（项目依赖管理和构建）
   - 编程语言：Java 11（稳定的企业级开发语言）
   - 其他组件：Lombok（减少样板代码）、Spring Session（会话管理）


### 二、需求分析
1. **功能需求**：
   - **用户管理模块**：
     - 读者注册/登录/登出功能
     - 作者注册/登录/登出功能
     - 用户个人信息查看/编辑功能
     - 用户密码修改功能
   - **小说管理模块**：
     - 小说分类管理（玄幻、武侠、都市等）
     - 小说发布、编辑、删除功能
     - 小说信息展示（名称、作者、简介、封面等）
     - 小说搜索与筛选功能
   - **章节管理模块**：
     - 章节发布、编辑、删除功能
     - 章节顺序管理
     - 章节内容展示
   - **阅读功能模块**：
     - 在线阅读功能
     - 阅读历史记录
     - 书签功能
     - 章节导航功能
   - **互动功能模块**：
     - 评论发布与查看
     - 小说评分功能
     - 收藏功能
     - 用户留言功能
   - **管理功能模块**：
     - 管理员后台管理
     - 用户管理
     - 内容审核功能

2. **非功能需求**：
   - **性能需求**：
     - 页面加载时间不超过3秒
     - 支持100个并发用户访问
     - 数据库查询响应时间不超过1秒
   - **安全性需求**：
     - 用户密码加密存储（BCrypt）
     - 防止SQL注入攻击
     - 防止XSS攻击
     - 用户会话安全
   - **易用性需求**：
     - 界面友好，操作简便
     - 响应式设计，支持多种设备
     - 清晰的导航和操作提示
     - 错误处理和用户友好提示
   - **兼容性需求**：
     - 支持主流浏览器（Chrome、Firefox、Safari、Edge）
     - 支持移动端访问
     - 遵循Web标准

3. **用户故事**：
   - **读者用户故事**：
     - 作为读者，我希望能够注册账号并登录，以便享受个性化服务
     - 作为读者，我希望能够浏览各种分类的小说，方便找到感兴趣的读物
     - 作为读者，我希望能够在线阅读小说章节，获得良好的阅读体验
     - 作为读者，我希望能够对小说进行评论和评分，与其他读者交流
     - 作为读者，我希望能够收藏喜欢的小说，方便后续阅读
     - 作为读者，我希望能够记录阅读进度，方便下次继续阅读
   - **作者用户故事**：
     - 作为作者，我希望能够注册为作者账号，发布自己的作品
     - 作为作者，我希望能够发布和管理自己的小说及章节
     - 作为作者，我希望能够查看读者的评论和评分，了解读者反馈
   - **管理员用户故事**：
     - 作为管理员，我希望能够管理用户账号，维护系统安全
     - 作为管理员，我希望能够审核小说内容，确保内容质量


### 三、系统设计
1. **架构设计**：采用Spring Boot + MyBatis的MVC三层架构模式
   - **表现层（Controller层）**：
     - IndexController：首页控制器，处理首页展示逻辑
     - NovelController：小说相关控制器，处理小说列表、详情等请求
     - ReaderController：读者相关控制器，处理读者个人中心等功能
     - AuthController：认证控制器，处理用户登录、注册等认证相关请求
     - FileUploadController：文件上传控制器，处理小说封面等文件上传
     - AdminController：管理控制器，处理管理员后台功能
   - **业务逻辑层（Service层）**：
     - ReaderService/ReaderServiceImpl：读者业务逻辑处理
     - AuthorService/AuthorServiceImpl：作者业务逻辑处理
     - NovelService/NovelServiceImpl：小说业务逻辑处理
     - ChapterService/ChapterServiceImpl：章节业务逻辑处理
     - CommentService/CommentServiceImpl：评论业务逻辑处理
     - BookmarkService/BookmarkServiceImpl：书签业务逻辑处理
     - MessageService/MessageServiceImpl：消息业务逻辑处理
     - CategoryService/CategoryServiceImpl：分类业务逻辑处理
   - **数据访问层（Mapper层）**：
     - CategoryMapper：分类数据访问接口及XML映射
     - NovelMapper：小说数据访问接口及XML映射
     - ChapterMapper：章节数据访问接口及XML映射
     - CommentMapper：评论数据访问接口及XML映射
     - BookmarkMapper：书签数据访问接口及XML映射
     - MessageMapper：消息数据访问接口及XML映射
     - AuthorMapper：作者数据访问接口及XML映射
     - ReaderMapper：读者数据访问接口及XML映射
   - **实体层（Entity层）**：
     - Reader：读者实体类
     - Author：作者实体类
     - Category：分类实体类
     - Novel：小说实体类
     - Chapter：章节实体类
     - Comment：评论实体类
     - Bookmark：书签实体类
     - Message：消息实体类
   - **配置层**：
     - DatabaseConfig：数据库配置类，负责初始化SQLite数据库
     - WebMvcConfig：Web MVC配置类，处理静态资源等配置

2. **数据库设计**：使用SQLite数据库（novel.db），采用关系型数据库设计原则
   - **reader表（读者信息表）**：
     - id: INTEGER PRIMARY KEY AUTOINCREMENT（主键，自增）
     - username: VARCHAR(50) NOT NULL UNIQUE（用户名，唯一）
     - password: VARCHAR(100) NOT NULL（密码）
     - nickname: VARCHAR(50)（昵称）
     - email: VARCHAR(100)（邮箱）
     - avatar: VARCHAR(255)（头像）
     - create_time: DATETIME DEFAULT CURRENT_TIMESTAMP（创建时间）
     - update_time: DATETIME DEFAULT CURRENT_TIMESTAMP（更新时间）
   - **author表（作者信息表）**：
     - id: INTEGER PRIMARY KEY AUTOINCREMENT（主键，自增）
     - username: VARCHAR(50) NOT NULL UNIQUE（用户名，唯一）
     - password: VARCHAR(100) NOT NULL（密码）
     - name: VARCHAR(50) NOT NULL（姓名）
     - introduction: TEXT（介绍）
     - level: INTEGER DEFAULT 1（等级）
     - is_transfer: INTEGER DEFAULT 0（是否转让）
     - create_time: DATETIME DEFAULT CURRENT_TIMESTAMP（创建时间）
     - update_time: DATETIME DEFAULT CURRENT_TIMESTAMP（更新时间）
   - **category表（小说分类表）**：
     - id: INTEGER PRIMARY KEY AUTOINCREMENT（主键，自增）
     - name: VARCHAR(50) NOT NULL（分类名称）
     - description: VARCHAR(255)（分类描述）
   - **novel表（小说信息表）**：
     - id: INTEGER PRIMARY KEY AUTOINCREMENT（主键，自增）
     - name: VARCHAR(100) NOT NULL（小说名称）
     - author_id: INTEGER NOT NULL（作者ID，外键引用author表）
     - category_id: INTEGER（分类ID，外键引用category表）
     - cover: VARCHAR(255)（封面图片）
     - description: TEXT（小说描述）
     - status: INTEGER DEFAULT 0（状态）
     - chapter_count: INTEGER DEFAULT 0（章节数）
     - page_count: INTEGER DEFAULT 0（页数）
     - vote_count: INTEGER DEFAULT 0（投票数）
     - word_count: INTEGER DEFAULT 0（字数）
     - view_count: INTEGER DEFAULT 0（浏览数）
     - create_time: DATETIME DEFAULT CURRENT_TIMESTAMP（创建时间）
     - update_time: DATETIME DEFAULT CURRENT_TIMESTAMP（更新时间）
     - FOREIGN KEY (author_id) REFERENCES author(id)
     - FOREIGN KEY (category_id) REFERENCES category(id)
   - **chapter表（小说章节表）**：
     - id: INTEGER PRIMARY KEY AUTOINCREMENT（主键，自增）
     - novel_id: INTEGER NOT NULL（小说ID，外键引用novel表）
     - title: VARCHAR(100) NOT NULL（章节标题）
     - content: TEXT（章节内容）
     - word_count: INTEGER DEFAULT 0（字数）
     - chapter_order: INTEGER NOT NULL（章节顺序）
     - create_time: DATETIME DEFAULT CURRENT_TIMESTAMP（创建时间）
     - update_time: DATETIME DEFAULT CURRENT_TIMESTAMP（更新时间）
     - FOREIGN KEY (novel_id) REFERENCES novel(id)
   - **comment表（小说评论表）**：
     - id: INTEGER PRIMARY KEY AUTOINCREMENT（主键，自增）
     - novel_id: INTEGER NOT NULL（小说ID，外键引用novel表）
     - reader_id: INTEGER NOT NULL（读者ID，外键引用reader表）
     - content: TEXT NOT NULL（评论内容）
     - rating: INTEGER DEFAULT 5（评分）
     - create_time: DATETIME DEFAULT CURRENT_TIMESTAMP（创建时间）
     - FOREIGN KEY (novel_id) REFERENCES novel(id)
     - FOREIGN KEY (reader_id) REFERENCES reader(id)
   - **bookmark表（读者收藏表）**：
     - id: INTEGER PRIMARY KEY AUTOINCREMENT（主键，自增）
     - reader_id: INTEGER NOT NULL（读者ID，外键引用reader表）
     - novel_id: INTEGER NOT NULL（小说ID，外键引用novel表）
     - create_time: DATETIME DEFAULT CURRENT_TIMESTAMP（创建时间）
     - FOREIGN KEY (reader_id) REFERENCES reader(id)
     - FOREIGN KEY (novel_id) REFERENCES novel(id)
     - UNIQUE(reader_id, novel_id)（唯一约束）
   - **reading_history表（阅读记录表）**：
     - id: INTEGER PRIMARY KEY AUTOINCREMENT（主键，自增）
     - reader_id: INTEGER NOT NULL（读者ID，外键引用reader表）
     - novel_id: INTEGER NOT NULL（小说ID，外键引用novel表）
     - chapter_id: INTEGER（章节ID，外键引用chapter表）
     - last_read_time: DATETIME DEFAULT CURRENT_TIMESTAMP（最后阅读时间）
     - FOREIGN KEY (reader_id) REFERENCES reader(id)
     - FOREIGN KEY (novel_id) REFERENCES novel(id)
     - FOREIGN KEY (chapter_id) REFERENCES chapter(id)
   - **message表（留言板表）**：
     - id: INTEGER PRIMARY KEY AUTOINCREMENT（主键，自增）
     - reader_id: INTEGER（读者ID）
     - author_id: INTEGER（作者ID）
     - content: TEXT NOT NULL（消息内容）
     - reply_content: TEXT（回复内容）
     - reply_time: DATETIME（回复时间）
     - create_time: DATETIME DEFAULT CURRENT_TIMESTAMP（创建时间）

3. **接口设计**：定义RESTful API接口规范
   - **用户认证接口**：
     - POST /login：用户登录
     - POST /register：用户注册
     - GET /logout：用户登出
     - GET /profile：获取用户信息
   - **小说管理接口**：
     - GET /novels：获取小说列表
     - GET /novel/{id}：获取小说详情
     - POST /novel/new：发布新小说
     - PUT /novel/{id}：更新小说信息
     - DELETE /novel/{id}：删除小说
     - GET /novels/category/{categoryId}：按分类获取小说
   - **章节管理接口**：
     - GET /chapter/{id}：获取章节内容
     - GET /chapters/{novelId}：获取小说所有章节列表
     - POST /chapter/new：发布新章节
     - PUT /chapter/{id}：更新章节内容
     - DELETE /chapter/{id}：删除章节
   - **阅读功能接口**：
     - GET /read/{novelId}/{chapterId}：阅读指定章节
     - GET /read/next/{chapterId}：获取下一章节
     - GET /read/prev/{chapterId}：获取上一章节
     - POST /bookmark：添加书签
     - GET /bookmarks：获取用户书签列表
     - GET /history：获取阅读历史
   - **互动功能接口**：
     - POST /comment：发布评论
     - GET /comments/{novelId}：获取小说评论列表
     - POST /rating：提交评分
     - POST /message：发送消息
     - GET /messages：获取消息列表


### 四、实现过程
1. **前端实现**：
   - **技术栈**：使用Thymeleaf模板引擎 + Bootstrap + jQuery
   - **页面结构**：
     - 首页：展示推荐小说、热门小说、最新章节等
     - 小说列表页：按分类展示小说，支持搜索和筛选
     - 小说详情页：展示小说基本信息、简介、章节列表
     - 阅读页面：章节阅读界面，包含上下章导航、书签功能
     - 用户中心：个人资料、阅读历史、收藏列表等
     - 登录/注册页：用户认证界面
     - 管理后台：管理员功能界面
   - **响应式设计**：使用Bootstrap框架实现响应式布局，适配不同设备屏幕
   - **交互功能**：使用jQuery实现页面动态效果和AJAX交互
   - **用户体验**：优化页面加载速度，提供流畅的用户操作体验

2. **后端实现**：
   - **Controller层实现**：
     - 使用@RestController和@Controller注解定义控制器
     - 使用@RequestMapping、@GetMapping、@PostMapping等注解映射HTTP请求
     - 实现参数验证和异常处理机制
     - 处理文件上传和下载功能
   - **Service层实现**：
     - 定义业务逻辑接口，实现具体业务功能
     - 使用@Service注解标记服务类
     - 实现事务管理，确保数据一致性
     - 使用构造函数注入实现依赖注入
     - 实现业务逻辑的复用和分层
   - **Mapper层实现**：
     - 定义数据访问接口，使用@Mapper注解
     - 使用MyBatis XML映射文件编写SQL语句
     - 实现复杂查询和关联查询
     - 使用动态SQL处理不同查询条件
   - **实体层实现**：
     - 使用JPA注解定义实体类
     - 使用Lombok注解减少样板代码
     - 定义实体间的关系映射

3. **数据库实现**：
   - **数据库选择**：使用SQLite作为嵌入式数据库，便于部署和维护
   - **表结构设计**：按照需求分析设计合理的表结构和外键关系
   - **初始化脚本**：通过schema.sql文件定义数据库表结构和初始数据
   - **自动初始化**：通过DatabaseConfig类在应用启动时自动创建和初始化数据库
   - **数据访问**：使用MyBatis进行数据访问，实现类型安全的SQL映射


### 五、工作量分配(不用写)
#### 个人贡献
- 成员1：______________________________________________________（具体任务、投入时间（小时）及完成度）
- 成员2：______________________________________________________（具体任务、投入时间（小时）及完成度）
- 成员3：______________________________________________________（具体任务、投入时间（小时）及完成度）


### 六、项目总结
1. **成果展示**：
   - 成功实现了一个功能完整的在线小说网站，包含用户管理、小说发布、章节阅读、评论评分、收藏书签等核心功能
   - 系统采用Spring Boot + MyBatis + SQLite技术栈，架构清晰，代码规范
   - 实现了用户友好的界面设计，支持响应式布局，提供良好的用户体验
   - 完成了数据库设计和实现，数据结构合理，关系清晰
   - 实现了完整的用户认证和授权机制，保证系统安全性

2. **经验教训**：
   - **技术收获**：
     - 深入理解了Spring Boot框架的核心概念和使用方法
     - 掌握了MyBatis ORM框架的使用和SQL映射技巧
     - 学习了Thymeleaf模板引擎的使用方法和页面开发技巧
     - 加深了对MVC架构模式的理解和实践
     - 了解了SQLite数据库的特点和使用场景
   - **开发挑战**：
     - 在处理复杂关联查询时遇到了性能问题，通过优化SQL语句和添加索引解决
     - 用户会话管理和权限控制需要仔细设计，确保安全性
     - 前端页面的响应式设计需要考虑不同设备的兼容性
     - 数据库外键约束在SQLite中的处理方式需要特别注意
   - **改进方向**：
     - 可以进一步优化系统性能，引入缓存机制
     - 可以增加更多的前端交互功能，提升用户体验
     - 可以完善安全机制，增加更多的防护措施
     - 可以扩展更多功能，如消息推送、社交功能等

3. **致谢**：感谢指导老师的悉心指导和团队成员的共同努力，使我们能够顺利完成本次课程项目。特别感谢老师在技术选型、架构设计和问题解决方面的帮助指导，以及团队成员之间的协作配合。


### 七、附件
- 项目代码仓库链接或压缩包（不用写）
- 数据库脚本文件：数据库脚本文件.sql
- 问题记录集：问题记录集.txt


> 请各团队按照上述模板认真填写并提交，确保报告内容真实、完整，能够全面反映项目开发的整个过程及成果。祝同学们在本次课程项目中取得优异成绩！